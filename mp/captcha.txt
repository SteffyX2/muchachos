#include <LiquidCrystal.h>
LiquidCrystal lcd(8,9,4,5,6,7);

char captcha[8];
char test[64];

int tip;
int i;
int duzina_captcha;
int duzina_test;
int ispravno;
void setup()
{
  lcd.begin(16,2);
  Serial.begin(9600);
  randomSeed(analogRead(6));

}

void loop()
{

  duzina_captcha = random(5,9);

  lcd.clear();
  lcd.setCursor(0,0);
  for(i = 0; i < duzina_captcha; i++)
  {
    tip = random(0,3);
    switch(tip)
    {
      case(0):
      {		
        captcha[i] = random(48,58);
        break;
      }
      case(1):
      {
        captcha[i] = random(65,91);
        break;
      }
      case(2):
      {
        captcha[i] = random(97,123);
        break;
      }
    }
    lcd.print(captcha[i]);
    
  }


  Serial.println("Unesite tekst: ");
  while(Serial.available() == 0);
  delay(100);
  duzina_test = Serial.available();
  Serial.readBytes(test, duzina_test);
  test[duzina_test] = 0;

  Serial.println(test);
  

  ispravno = 1;
  if(duzina_test != duzina_captcha)
  {
	ispravno = 0;
  }
  if(test[i] != captcha[i])
  {
  	ispravno = 0;
  }
  
  if(ispravno == 1)
  {
  	lcd.clear();
    lcd.setCursor(4,0);
    lcd.print("USPESNO");
  }
  if(ispravno == 0)
  {
  	lcd.clear();
    lcd.setCursor(4,0);
    lcd.print("failed");
  }
  
  delay(1000);
}
